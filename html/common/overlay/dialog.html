<link rel="stylesheet" type="text/css" href="/node_modules/@fyn-software/suite/css/style.css">

<style>
    :host {
        display: grid;
        grid-template-rows: auto 1fr auto;
        grid-gap: 1em;
        align-content: start;
        position: fixed;
        box-shadow: 0 0 1em #0007;
        background-color: #222;
        padding: 1em;
        color: #eee;
        opacity: 0;
        pointer-events: none;
        width: 60vw;
        height: auto;
        top: var(--y);
        left: var(--x);
        transform-origin: center;
        font-size: 1rem;
        z-index: 1000;
        border-radius: var(--radius);
    }

    :host([open]) {
        opacity: 1;
        pointer-events: all;
    }

    :host > handlers {
        z-index: -1;
        position: absolute;
        top: -2px;
        left: -2px;
        width: calc(100% + 4px);
        height: calc(100% + 4px);
        background: transparent;
    }

    :host > handlers > handler                 { display: block; position: absolute; background: inherit; }
    :host > handlers > handler:nth-child(odd)  {                       width: 5px;                 height: 5px; }
    :host > handlers > handler:nth-child(3)    { top: 0;    left: 0;                                                           cursor: nwse-resize; }
    :host > handlers > handler:nth-child(5)    { top: 0;    right: 0;                                                          cursor: nesw-resize; }
    :host > handlers > handler:nth-child(7)    { bottom: 0; right: 0;                                                          cursor: nwse-resize; }
    :host > handlers > handler:nth-child(1)    { bottom: 0; left: 0;                                                           cursor: nesw-resize; }
    :host > handlers > handler:nth-child(4)    { top: 0;    left: 5px; width: calc(100% - 10px);   height: 5px;                cursor: ns-resize; }
    :host > handlers > handler:nth-child(6)    { top: 5px;  right: 0;  width: 5px;                 height: calc(100% - 10px);  cursor: ew-resize; }
    :host > handlers > handler:nth-child(8)    { bottom: 0; left: 5px; width: calc(100% - 10px);   height: 5px;                cursor: ns-resize; }
    :host > handlers > handler:nth-child(2)    { top: 5px;  left: 0;   width: 5px;                 height: calc(100% - 10px);  cursor: ew-resize; }

    :host > header,
    :host > article,
    :host > footer {
        display: grid;
    }

    :host > header {
        width: 100%;
        position: relative;
    }

    :host > header h1 {
        position: absolute;
        top: 50%;
        left: 50%;

        background-color: inherit;
        color: inherit;

        font-size: 2.5em;
        font-weight: 900;
        text-transform: uppercase;
        text-shadow: 0 0 1em #000;

        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;

        transform: translate(-50%, -50%);
        z-index: 1;
    }

    :host > header fyn-common-graphics-image {
        --img-radius: var(--radius) var(--radius) 0 0 ;
        --mode: cover;
        margin: -1em;
        height: 200px;
    }

    :host > header fyn-common-graphics-image::before {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #0007;
        mix-blend-mode: multiply;
        border-radius: var(--img-radius);
    }

    :host > footer {
        justify-content: end;
    }
</style>

<handlers if="{{ resizable }}">
    <handler corner="bottom-left"></handler>
    <handler side="left"></handler>
    <handler corner="top-left"></handler>
    <handler side="top"></handler>
    <handler corner="top-right"></handler>
    <handler side="right"></handler>
    <handler corner="bottom-right"></handler>
    <handler side="bottom"></handler>
</handlers>

<header>
    <h1 if="{{ title.length > 0 }}">{{ title }}</h1>

    <fyn-common-graphics-image src="{{ img }}" if="{{ img.length > 0 }}"></fyn-common-graphics-image>

    <slot name="header"></slot>
</header>

<article>
    <slot></slot>
</article>

<footer>
    <slot name="footer"></slot>
</footer>
