<link rel="stylesheet" type="text/css" href="/node_modules/@fyn-software/suite/css/style.css">

<style>
    :host {
        display: grid;
        grid: auto 1fr auto / 1fr;
        padding: .5em;
    }

    :host > fyn-common-layout-list > span {
        position: relative;
        grid-auto-flow: column;
        gap: .5em;
        background-color: transparent;
        border-radius: var(--radius) var(--radius) 0 0;
        padding: .5em 1em;
        user-select: none;
        transition: .3s background-color ease-in-out;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
        max-width: 20em;
    }

    :host > fyn-common-layout-list > delimiter {
        padding: .5em 1em;
    }

    :host > fyn-common-layout-list > span:last-of-type + delimiter {
        display: none;
    }

    :host > content {
        position: relative;
        display: grid;
        grid-auto-flow: column;
        grid-auto-rows: 1fr;
        grid-auto-columns: 100%;
        overflow-x: auto;
        scroll-snap-type: x mandatory;
    }

    :host > content > slot::slotted(*) {
        scroll-snap-align: center;
        /*position: absolute;*/
        /*width: 100%;*/
        /*height: 100%;*/
        /*opacity: 0;*/
        /*pointer-events: none;*/
    }

    :host > content > slot::slotted(*[active]) {
        /*opacity: 1;*/
        /*pointer-events: all;*/
    }

    :host > footer {
        display: grid;
        grid-auto-flow: column;
        grid-gap: 1em;
        justify-content: end;
    }
</style>

<fyn-common-layout-list id="bar" part="bar" horizontal :for="{{ i, step of steps }}">
    <span index="{{ i }}" part="step {{ i <= this.index ? 'active' : '' }} {{ i === this.index ? 'current' : '' }}">{{ step }}</span>
    <delimiter index="{{ i }}" part="delimiter {{ i <= this.index ? 'active' : '' }} {{ i === this.index ? 'current' : '' }}">/</delimiter>
</fyn-common-layout-list>

<content part="content">
    <slot></slot>
</content>

<footer>
    <fyn-common-form-button action="cancel" :if="{{ index === 0 }}">Cancel</fyn-common-form-button>
    <fyn-common-form-button action="previous" :if="{{ index > 0 }}">Previous</fyn-common-form-button>
    <fyn-common-form-button action="next" :if="{{ index < steps.length - 1 }}" primary>Next</fyn-common-form-button>
    <fyn-common-form-button action="submit" :if="{{ index === steps.length - 1 }}" primary>Submit</fyn-common-form-button>
</footer>
